# Класс `Counter` модуля [collections](_collections%20-%20модуль.md)
#counter #dict #счетчик
***
Тип `Counter` является подтипом типа [dict](../../../Встроенные%20возможности%20Python/dict/_dict%20-%20тип%20данных.md), специально разработанный для подсчета хешируемых объектов в Python. `Counter` хранит объекты в качестве ключей, а их количество — в качестве значений.

Тип `Counter`, будучи подтипом типа `dict`, наследует все методы, предоставляемые обычным словарем. При этом вызов метода `fromkeys()` всегда будет приводить к возникновению ошибки

**Примечание:** Если обратиться по ключу, которого нет в `Counter` словаре, то ошибка `KeyError` возникать не будет. Будет возвращено нулевое значение.

**Примечание:** Объекты типа `Counter` можно сравнивать между собой. Равные объекты имеют одинаковое количество элементов и содержат равные элементы (`ключ: количество`). Для сравнения используются операторы `==` и `!=`.

## Методы класса `Counter`
***
- **[elements()](#elements)** - возвращает объект-итератор последовательность ключей в соответствии их количесту
- **[most_common(n)](#most_common%20n%20int)** - возвращает список кортежей самых распространненных элементов
- **[subtract(iterable-or-mapping)](#subtract%20iterable-or-mapping)** вычитает значения ключей
- **[total()](#total)** - сумма значений
- **[update(iterable-or-mapping)](#update%20iterable-or-mapping)** - пополняет (складывает) значения ключей значениями или количеством элементов итерируемой последовательности


## Операции с объектами `Counter`
***
- Сложение объектов `Counter`
- Вычитание объектов `Counter`
- Поиск минимальных значений двух объектов `Counter`
- Поиск максимальных значений двух объектов `Counter`
```python
from collections import Counter
c = Counter(a=3, b=1, c=-5, d=0)
d = Counter(a=1, b=2)
# Сложить два счетчика:  c[x] + d[x]
print(c + d)   # Counter({'a': 4, 'b': 3}) 
#                        ^^^^^^^^^^^^^^^^
#        отрицательное значение 'c' и нулевое значение 'd' не сохранились!!!

# Вычитание счетчиков, сохраняются 
# только положительные значения элементов
print(c - d)   # Counter({'a': 2})

# Пересечение счетчиков:  min(c[x], d[x]) 
print(c & d)
# Counter({'a': 1, 'b': 1}) - при поиске минимальных значений отрицательные и нулевые значения не учитываются

# Объединение счетчиков:  max(c[x], d[x])
print(c | d)  # Counter({'a': 3, 'b': 2})

print(+a)  # Counter({'a': 3, 'b': 1})  - интерпретируется как сложение с пустым списком

print()
```
**Примечание:** Операции с объектами `Counter` игнорируют ключи с нулевыми и отрицательными значениями и вызывают исключение при наличии не числовых значений

## Описание методов
### `elements()`:
Возвращает объект-итератор с последовательностью ключей повторяющихся в соответствии со значением. Ключи для нулевых и отрицательных значений игнорируются
```python
from collections import Counter

newcounter = Counter(dict([('a', -2), ('b', 0), ('c', 3)]))
print(list(newcounter.elements()))   # ['c', 'c', 'c']
```

### `most_common(n: int)`:
Возвращает список кортежей самых распространенных элементов в порядке убывания. 
параметр `n` - количестко возвращаемых элементов, по умолчанию `None`. Если не указан, то все. Если привышает фактическое количество, то выведутся все

### `subtract(iterable-or-mapping)`:
Принимает в качестве параметра любую итерируемую последовательность, словарь или другой объект `Counter`. Вычитает значения ключей. 

**Примечание:** Допускает отрицательные значения!
```python
from collections import Counter

newcounter = Counter(a=1, b=2, c=3)
print(newcounter)       # Counter({'c': 3, 'b': 2, 'a': 1})
newcounter.subtract('aaabc')
print(newcounter)       # Counter({'c': 2, 'b': 1, 'a': -2})
```

### `total()`:
Вычисляет сумму значений. Появился в `Python 3.10`

### `update(iterable-or-mapping)`:
Принимает в качестве параметра любую итерируемую последовательность, словарь или другой объект `Counter`. Не обновляет, а пополняет значения ключей.
```python
from collections import Counter

newcounter = Counter(a=1, b=2, c=3)
print(newcounter)               # Counter({'c': 3, 'b': 2, 'a': 1})
newcounter.update(a=1, b=5, d=10)
print(newcounter)               # Counter({'d': 10, 'b': 7, 'c': 3, 'a': 2})
```