# Модуль `re`
#re #регулярныевыражения [Калькулятор регулярных выражений](https://regex101.com/)
***

>### [Специальные символы](#Специальные%20символы)
>### [Класс Match](#Класс%20Match)
>### [Методы модуля `re`](#Методы%20модуля%20re)
 

## Специальные символы
***

### Шаблоны, соответствующие одному символу
  
Во всех примерах ниже соответствия регулярному выражению выделяются цветом с подчёркиванием.

|Шаблон|Описание|Пример|Применяем к тексту|
|---|---|---|---|
|`.`|Один любой символ, кроме новой строки `\n`.|`м.л.ко`|<mark><u>молоко</u></mark>, <mark><u>малако</u></mark>,  И<mark><u>м0л0ко</u></mark>Ихлеб|
|`\d`|Любая цифра<br>аналогичная запись `[0-9]`|`СУ\d\d`|<mark><u>СУ35</u></mark>, <mark><u>СУ11</u></mark>1, АЛ<mark><u>СУ14</u></mark>|
|`\D`|Любой символ, кроме цифры<br>аналогичная запись `[^0-9]`|`926\D123`|<mark><u>926)123</u></mark>, 1<mark><u>926-123</u></mark>4|
|`\s`|Любой пробельный символ (пробел, табуляция, конец строки и т.п.)<br>примерная аналогия:<br>`[ \f\n\r\t\v]`|`бор\sода`|<mark><u>бор ода</u></mark>, <mark><u>бор<br>ода</u></mark>, борода|
|`\S`|Любой непробельный символ|`\S123`|<mark><u>X123</u></mark>, <mark><u>я123</u></mark>, <mark><u>!123</u></mark>456, 1 + 123456|
|`\w`|Любая буква (то, что может быть частью слова), а также цифры и `_`|`\w\w\w`|<mark><u>Год</u></mark>, <mark><u>f_3</u></mark>, <mark><u>qwe</u></mark>rt|
|`\W`|Любая не-буква, не-цифра и не подчёркивание|`сом\W`|<mark><u>сом!</u></mark>, сом|
|`[..]`|Один из символов в скобках, а также любой символ из диапазона `a-b`<br> в диапазон `[а-яА-Я]` не включаются `ё` и `Ё`|`[0-9][0-9A-Fa-f]`|<mark><u>12</u></mark>, <mark><u>1F</u></mark>, <mark><u>4b</u></mark> A<mark><u>12</u></mark>A|
|`[^..]`|Любой символ, кроме перечисленных<br>диапазоны `[^а-я]` `[^А-Я]` не учитывают `ё` и `Ё`|`<[^>]>`|<mark><u>&lt;1&gt;</u></mark>, <mark><u>&lt;a&gt;</u></mark>, &lt;&gt;&gt;|
|`[abc-], [-1]`|если нужен минус, его нужно указать последним или первым|||
|`\n`|Перенос строки|||
|`\t`|Табуляция|||
|`\r`|Возврат каретки|||
|`\`|Экранирование спец символа|`https:\\stepik.org`<br><br>`https:\\\\stepik\.org`|https:\\\\stepik.org#re<br><br><mark><u>https:\\\\stepik.org</u></mark>#re|
|`[*[(+\\\]\t]`|внутри скобок нужно экранировать только `]` и `\`|||


### Квантификаторы (указание количества повторений)

|Шаблон|Описание|Пример|Применяем к тексту|
|---|---|---|---|
|`{n}`|Ровно n повторений|`\d{4}`|1, 12, 123, <mark><u>1234</u></mark>, <mark><u>1234</u></mark>5|
|`{m,n}`|От m до n повторений включительно|`\d{2,4}`|1, <mark><u>12</u></mark>, <mark><u>123</u></mark>, <mark><u>1234</u></mark>, <mark><u>1234</u></mark>5|
|`{m,}`|Не менее m повторений|`\d{3,}`|1, 12, <mark><u>123</u></mark>, A<mark><u>1234</u></mark>, <mark><u>12345</u></mark>|
|`{,n}`|Не более n повторений|`\d{,2}`|<mark><u>1</u></mark>, <mark><u>12</u></mark>, <mark><u>12</u></mark>3|
|`?`|Ноль или одно вхождение,<br>синоним `{0,1}`|`валы?`|<mark><u>вал</u></mark>, <mark><u>валы</u></mark>, <mark><u>вал</u></mark>ов|
|`*`|Ноль или более,<br>синоним `{0,}`|`СУ\d*`|<mark><u>СУ</u></mark>, 100<mark><u>СУ1</u></mark>, <mark><u>СУ555</u></mark>, А<mark><u>СУ</u></mark>БМ|
|`+`|Одно или более,<br>синоним `{1,}`|`a\)+`|aba, <mark><u>a)</u></mark>, <mark><u>a))</u></mark>, <mark><u>a)))</u></mark>, b<mark><u>a)</u></mark>])|
|`*?`<br>`+?`<br>`??`<br>`{m,n}?`<br>`{,n}?`<br>`{m,}?`|По умолчанию квантификаторы _жадные_ — захватывают максимально возможное число символов.<br>Добавление `?` делает их _ленивыми_, они захватывают минимально возможное число символов|`h.*h`<br><br><br>`h.*?h`|<mark><u>haaassshhhoooeeeh</u></mark><br><br><br><mark><u>haaasssh</u></mark>h<mark><u>hoooeeeh</u></mark>|


### Группы и перечисления

|Шаблон|Описание|Пример|Применяем к тексту|
|---|---|---|---|
|&VerticalSeparator;|Перечисление|`белый`&VerticalSeparator;`синий`|На Мише был <mark><u>белый</u></mark> свитер и <mark><u>синий</u></mark> галстук|
|`(...)`|Группа с захватом. Группирует содержимое для обработки как единое целое и присваивает группе порядковый номер|`(\d\d-){2}\d\d`|<mark><u>22-35-14</u></mark> 223514 22-3514 2235-14|
|||`(Mr`&VerticalSeparator;`Ms`&VerticalSeparator;`Mrs).\w+`|Dr.Alex, <mark><u>Mr.White</u></mark>, <mark><u>Mrs.Anna</u></mark>|
|`\number`|Обратная ссылка на группу по ее порядковому номеру|`([aA])([bB])C\2\1`|abCBa, <mark><u>AbCbA</u></mark>, <mark><u>abCba</u></mark>, <mark><u>aBCBa</u></mark>, aBCbA
|`(?:...)`|Группа без захвата. Не присваивает группе порядковый номер|||
|`(?P<name>...)`|Именованная группа с захватом. Вместо порядкового номера присваивается имя группы|`<(?P<tag>[hH][1-6])>\w+<(?P=tag)>`|<mark><u>&lt;H1&gt;Заголовок&lt;/H1&gt;</u></mark><br>&lt;h2&gt;Заголовок&lt;/h3&gt;|
|`(?P=name)`|Обратная ссылка на именованную группу|пример использования выше||



### Местоположение

|Шаблон|Описание|Пример|Применяем к тексту|
|---|---|---|---|
|`\b`|Начало или конец слова (слева пусто или не-буква, справа буква и наоборот).<br>В отличие от предыдущих соответствует позиции, а не символу|`\bвал`|<mark><u>вал</u></mark>, перевал, Перевалка|
|`\B`|Не граница слова: либо и слева, и справа буквы, либо и слева, и справа НЕ буквы|`\Bвал`|пере<mark><u>вал</u></mark>, вал, Пере<mark><u>вал</u></mark>ка|
|||`\bвал\b` - аналогично `\Wвал\W`|перевал, <mark><u>вал</u></mark>, Перевалка
|`^`|Начало предложения или первый символ после `\n`|`^[сС]аш.`|<mark><u>Саша</u></mark> позвал Сашу|
|`$`|Конец предложения или последний символ перед `\n`|`[сС]аш.$`|Саша позвал <mark><u>Сашу</u></mark>|

## Класс `Match`
***
- [Match.group()](#Match%20group) - возвращает содержимое групп с захватом или всю строку

### `Match.group()`:

Метод `group()` возвращает одну или несколько подгрупп совпадения. Если метод вызывается без аргументов, то возвращается вся подстрока, которая совпала с шаблоном регулярного выражения.

Если мы пользуемся **именованными группами**, используя синтаксис `(?P<name><regex>)`, тогда мы можем использовать название группы в качестве аргумента метода `group()`

Приведенный ниже код:

```python
from re import search

match = search('(\w+),(\w+),(\w+)', 'foo,bar,baz')

print(match.group())           # вся строка    # foo,bar,baz
print(match.group(0))          # вся строка    # foo,bar,baz
print(match.group(1))          # подгруппа     # foo
print(match.group(2))          # подгруппа     # bar
print(match.group(3))          # подгруппа     # baz
print(match.group(1, 3, 2, 1)) # кортеж        # ('foo', 'baz', 'bar', 'foo')
```




## Методы модуля `re`
***

|   |   |
|---|---|
|**[fullmatch(pattern, string, flags=0)](#fullmatch%20pattern%20string%20flags%200)**|проверка на совпадение шаблона `pattern` и строки `string`|
|**[match(pattern, string, flags=0)](#match%20pattern%20string%20flags%200)**|поиск шаблона `pattern` в начале строки `string`|
|**[search(pattern, string, flags=0)](#search%20pattern%20string%20flags%200)**|поиск первого совпадения шаблона `pattern` в строке `string`|


### `fullmatch(pattern, string, flags=0)`:

Функция `fullmatch()` возвращает специальный объект соответствия (тип [Match](#Класс%20Match)), если **вся строка** соответствует регулярному выражению, или значение `None` в противном случае.

Аргументы функции:

-   `pattern` — шаблон регулярного выражения
-   `string` — строка для поиска
-   `flags=0` — один или несколько флагов (необязательный аргумент)

Приведенный ниже код:

```python
from re import fullmatch

match1 = fullmatch('\d+', '123foo')
match2 = fullmatch('\d+', 'foo123')
match3 = fullmatch('\d+', 'foo123bar')
match4 = fullmatch('\d+', '123')

print(match1)
print(match2)
print(match3)
print(match4)
```

выводит:

```no-highlight
None
None
None
<re.Match object; span=(0, 3), match='123'>
```

### `match(pattern, string, flags=0)`:

Функция `match()` возвращает специальный объект соответствия (тип [Match](#Класс%20Match)), если **начало строки** соответствуют регулярному выражению, или значение `None` в противном случае.

Аргументы функции:

-   `pattern` — шаблон регулярного выражения
-   `string` — строка для поиска
-   `flags=0` — один или несколько флагов (необязательный аргумент)

Приведенный ниже код:

```python
from re import match

match1 = match('super', 'superstition')
match2 = match('super', 'insuperable')

print(match1)
print(match2)
```

выводит:

```no-highlight
<re.Match object; span=(0, 5), match='super'>
None
```


### `search(pattern, string, flags=0)`:

Функция `search()` сканирует строку в поисках **первого совпадения** с регулярным выражением и возвращает специальный объект соответствия (тип [Match](#Класс%20Match)) или значение `None`, если ни одна позиция в строке не соответствует регулярному выражению. 

Аргументы функции:

-   `pattern` — шаблон регулярного выражения
-   `string` — строка для поиска
-   `flags=0` — один или несколько флагов (необязательный аргумент)

 Приведенный ниже код:

```python
from re import search

match1 = search('super', 'superstition')
match2 = search('super', 'insuperable')
match3 = search('super', 'without')

print(match1)
print(match2)
print(match3)
```

выводит:

```no-highlight
<re.Match object; span=(0, 5), match='super'>
<re.Match object; span=(2, 7), match='super'>
None
```