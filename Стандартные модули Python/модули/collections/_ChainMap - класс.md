# Класс `ChainMap` модуля [collections](_collections%20-%20модуль.md)
#ChainMap #dict #словарь 
***
Объединяет несколько словарей, сохраняя значения ключей ранее загруженных словарей.
При работе с `ChainMap` доступны все методы [dict](../../../Встроенные%20возможности%20Python/dict/_dict%20-%20тип%20данных.md)
Тип данных `ChainMap` удобен в том случае, когда мы уже имеем некоторую коллекцию с большим количеством словарей и нам требуется производить поиск по всем словарям одновременно.

```python
from collections import ChainMap

a = {'a': 1, 'b': 1, 'c': 1}
b = {'b': 5, 'c': 5, 'd': 5}
c = {'c': 3, 'd': 3, 'e': 3}

print(*ChainMap(a, b, c).items())  # ('c', 1) ('d', 5) ('e', 3) ('b', 1) ('a', 1)
```

Позволяет удалить или добавить пару ключ-значение только в первом из загруженных словарей, а так же изменить значение.

Добавлять можно объекты `dict`, `defaultdict`, `OrderedDict`, `Counter`

Добавленный словарь наследует свойства объекта-родителя. Для `defaultdict`, в случае если ключ отсутствует, мы будем получать значение по умолчанию, для `Counter` – нулевое значение.

При удалении пары ключ-значение становится доступной для чтения пара ключ-значение следующего словаря (если первый добавленный словарь не является `defaultdict` или `Counter`)

Изменения в исходных словарях отражаются на созданном объекте `ChainMap` и наоборот все изменения в созданном объекте `ChainMap` отразятся на исходных словарях

Итерация в объекте `ChainMap` начинается от последнего загруженного словаря к первому

```python
from collections import ChainMap

a = {'a': 1, 'b': 1, 'c': 1}
b = {'b': 5, 'c': 5, 'd': 5}
c = {'c': 3, 'd': 3, 'e': 3}

d = ChainMap(a, b, c)
del d['c']

print(*d.items())  # ('c', 5) ('d', 5) ('e', 3) ('b', 1) ('a', 1)
print(a)           # {'a': 1, 'b': 1}
a['new'] = 1000
b['elem'] = 2000
print(*d.items())  # ('c', 5) ('d', 5) ('e', 3) ('b', 1) ('elem', 2000) ('a', 1) ('new', 1000)
```

### Сравнение объектов `ChainMap`
Объекты `ChainMap` равны если равны их методы `.items()`

## Атрибуты и методы `ChainMap`
***
- **[maps](#maps)** - список, содержащий словари
- **[new_child()](#new_child%20m%20None)** - добавление словаря в начало
- **[parents](#parents)** - исключение первого словаря

### `maps`:
Атрибут. Список `list` содержащий добавленные словари. Поддерживает все методы объекта `list()`
При создании пустого `ChainMap` объекта его атрибут `maps` будет содержать пустой словарь `[{}]`

```python
pets = ChainMap(for_adoption, vet_treatment) 
pets.maps.reverse() 
pets.maps[0]['lions'] = 10 
del pets.maps[1]['cats']
```

### `new_child(m=None)`:
Возвращает новый объект `ChainMap` добавлением словаря, указанного в параметре, в начало списка `maps`. Если параметр не указан, создается новый пустой словарь, который так же помещается в начало списка
Вызов метода `d.new_child()` эквивалентен вызову `ChainMap({}, *d.maps)`

```python
from collections import ChainMap 
dad = {'name': 'Timur', 'age': 29} 
mom = {'name': 'Rosaly', 'age': 28} 
old_family = ChainMap(dad, mom) 
son = {'name': 'Soslan', 'age': 0} 
new_family = old_family.new_child(son)
```

### `parents`
Атрибут. Возвращает объект `ChainMap`, содержащий все словари, кроме первого
Обращение к атрибуту `d.parents` эквивалентно вызову `ChainMap(*d.maps[1:])`
